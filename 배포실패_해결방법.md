# 🔥 배포 실패 원인 및 해결 방법

## ❌ 실패 원인 발견!

### 문제
**Python 버전 불일치**

- **pyproject.toml 요구사항**: `requires-python = ">=3.12"`
- **Render 환경변수 설정**: `PYTHON_VERSION = 3.11.0` ❌

Python 3.12가 필요한데 3.11을 설치하려고 해서 빌드 실패!

---

## ✅ 해결 방법

### 방법 1: 환경 변수 수정 (권장)

Render 대시보드에서:

1. **gen-ai-interior-backend** 서비스 클릭
2. **Environment** 탭 클릭
3. **PYTHON_VERSION** 찾기
4. 값을 `3.11.0`에서 **`3.12.0`**으로 변경
5. **Save Changes** 클릭
6. 자동으로 재배포됨

### 방법 2: pyproject.toml 수정 (비추천)

Python 버전을 낮추는 방법 (호환성 문제 가능):

```toml
requires-python = ">=3.11"
```

---

## 🔧 올바른 Backend 설정

### Environment Variables (수정판)

```
GOOGLE_API_KEY
AIzaSyByspltgfRno_NisFdYIFZ89HCoaZdokNU

YOUTUBE_API_KEY
AIzaSyCKZIdDjUBLqC8hfcvIQehIul6R6pmGx-A

PYTHON_VERSION
3.12.0          ← 3.11.0이 아니라 3.12.0!

ALLOWED_ORIGINS
*
```

---

## 📋 재배포 체크리스트

### Backend 이미 생성했다면

1. ✅ Render 대시보드 → Backend 서비스 클릭
2. ✅ Environment 탭 → PYTHON_VERSION 수정 (3.12.0)
3. ✅ Save Changes → 자동 재배포 시작
4. ⏱️ 8-12분 대기

### Backend 아직 안 만들었다면

**올바른 설정으로 새로 생성**:

| 항목 | 값 |
|------|-----|
| Name | `gen-ai-interior-backend` |
| Language | `Python 3` |
| Branch | `main` |
| Region | `Singapore` |
| Root Directory | `backend` |
| Build Command | `pip install poetry && poetry install` |
| Start Command | `poetry run uvicorn main:app --host 0.0.0.0 --port $PORT` |
| Instance Type | **Free** |

**환경 변수 (수정판)**:
```
GOOGLE_API_KEY = AIzaSyByspltgfRno_NisFdYIFZ89HCoaZdokNU
YOUTUBE_API_KEY = AIzaSyCKZIdDjUBLqC8hfcvIQehIul6R6pmGx-A
PYTHON_VERSION = 3.12.0
ALLOWED_ORIGINS = *
```

---

## 🚨 다른 가능한 실패 원인

### 1. Poetry 설치 실패
**Build Command 대안**:
```bash
pip install --upgrade pip && pip install poetry && poetry install
```

### 2. 빌드 시간 초과 (90초 제한)
**해결**: 무료 티어는 90초 제한 있음. 현재 프로젝트는 문제 없음.

### 3. 메모리 부족
**해결**: 무료 티어는 512MB RAM. 현재 프로젝트는 문제 없음.

---

## 🔍 배포 로그 확인 방법

1. Render 대시보드 → 서비스 클릭
2. **Logs** 탭 클릭
3. 실패 원인 확인

일반적인 오류 메시지:
- `ModuleNotFoundError` → 의존성 문제
- `No matching Python version` → Python 버전 문제 ✅
- `Build failed` → Build Command 문제

---

## ✅ 성공 확인 방법

### 배포 성공 시 로그
```
==> Building...
==> Installing dependencies...
==> Starting server...
==> Your service is live!
```

### API 테스트
```bash
curl https://gen-ai-interior-backend.onrender.com/
```

**예상 응답**:
```json
{
  "status": "running",
  "message": "Gen AI Home Interior Designer API",
  "version": "1.0.0"
}
```

---

## 📌 최종 수정된 가이드

모든 가이드 파일의 **PYTHON_VERSION**을 `3.12.0`으로 수정했습니다:
- ✅ 빠른배포_체크리스트.md
- ✅ RENDER_실제화면_배포가이드.md
- ✅ RENDER_무료배포_가이드.md

---

**핵심 요약**: Python 3.12.0 사용! ⭐
